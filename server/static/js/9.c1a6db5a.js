(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"532a":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",[t("q-page-sticky",{attrs:{offset:[20,20],position:"bottom-right"}},[t("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===e.selected.length,label:"MARK UNREAD",color:"red",icon:"fas fa-times",fab:""},on:{click:function(a){return e.mark(!1)}}}),t("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===e.selected.length,label:"MARK READ",color:"green",icon:"fas fa-check",fab:""},on:{click:function(a){return e.mark(!0)}}}),t("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:1!==e.selected.length,label:"VIEW LOGS",color:"secondary",icon:"remove_red_eye",fab:""},on:{click:e.viewLogs}}),t("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===e.selected.length,label:"ADD TO EDITOR PANEL",color:"primary",icon:"add",fab:""},on:{click:e.addSelectionToEdit}})],1),t("q-table",{staticClass:"sticky my-auto",attrs:{loading:e.loading,"virtual-scroll":"","table-style":"max-height: 700px;",flat:"",pagination:e.pagination,"binary-state-sort":"",selection:"multiple",selected:e.selected,columns:e.columns,title:"Logs",data:e.data},on:{"update:pagination":function(a){e.pagination=a},"update:selected":function(a){e.selected=a},request:e.getData},scopedSlots:e._u([{key:"top",fn:function(){return[t("div",{staticClass:"flex flex-row items-center content-center"},[t("div",{staticClass:"text-h6 mr-12"},[e._v("LOGS")]),t("div",[t("q-btn",{staticClass:"mx-2",attrs:{outline:"",color:e.showOnlyUnread?"green":"black",label:e.showOnlyUnread?"Showing Only Unread":"Show Only Unread",icon:e.showOnlyUnread?"fas fa-eye":"fas fa-eye-slash"},on:{click:function(a){return e.toggleShow(!e.showOnlyUnread)}}})],1)])]},proxy:!0},{key:"body-cell-adminHasRead",fn:function(a){return[t("q-td",{class:a.row.adminHasRead?"text-green-500":"text-red-500",attrs:{props:a}},[t("q-icon",{attrs:{name:a.row.adminHasRead?"fas fa-check":"fas fa-exclamation",size:"md"}}),e._v("\n        "+e._s(a.row.adminHasRead?"Yes":"No")+"\n      ")],1)]}}])})],1)},i=[],s=t("2b0e"),o=t("2047"),l=function(e,a,t,n){function i(e){return e instanceof t?e:new t((function(a){a(e)}))}return new(t||(t=Promise))((function(t,s){function o(e){try{r(n.next(e))}catch(a){s(a)}}function l(e){try{r(n["throw"](e))}catch(a){s(a)}}function r(e){e.done?t(e.value):i(e.value).then(o,l)}r((n=n.apply(e,a||[])).next())}))};const r=[{name:"username",label:"Username",field:e=>e.user.username},{name:"name",label:"Name",field:e=>`${e.user.firstName} ${e.user.middleName} ${e.user.lastName}`},{name:"adminHasRead",label:"Read?",field:"adminHasRead",format:e=>""+(e?"✅ Yes":"❌ No")},{name:"fever",label:"Fever?",field:"fever",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"abdominalPain",label:"Abdominal Pain?",field:"abdominalPain",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"chills",label:"Chills?",field:"chills",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"cough",label:"Cough?",field:"cough",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"diarrhea",label:"Diarrhea?",field:"diarrhea",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"difficultyBreathing",label:"Difficulty Breathing?",field:"difficultyBreathing",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"headache",label:"Headache?",field:"headache",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"soreThroat",label:"Sore Throat?",field:"soreThroat",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"nauseaOrVomiting",label:"Nausea or Vomiting?",field:"nauseaOrVomiting",format:e=>""+(e?"❌ Yes":"✅ No")},{name:"others",label:"Others?",field:"others"}];var d=s["a"].extend({name:"ViewLogsOverview",activated(){this.getData({pagination:this.pagination})},data(){return{showOnlyUnread:!1,selected:[],store:o["a"],data:[],loading:!1,columns:r,pagination:{page:0,rowsPerPage:10,rowsNumber:0,sortBy:"id",descending:!1}}},methods:{getData(e){return l(this,void 0,void 0,(function*(){this.store.unreadLogsCount=(yield o["a"].axios.post("/admin/getUnreadLogsCount")).data.count,this.pagination=Object.assign({},e.pagination),this.loading=!0;const a=yield o["a"].axios.post("/admin/getLogs",{page:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,showOnlyUnread:this.showOnlyUnread});this.data=a.data.data.results,this.pagination.rowsNumber=a.data.data.total,this.loading=!1}))},viewLogs(){this.$router.push(`/view-logs/${this.selected[0].user.id}`)},addSelectionToEdit(){e:for(const e of this.selected){const a=e.user;for(const e of o["a"].usersToModify)if(a.id===e.id){this.$q.notify({message:`${a.username} is already in the edit panel.`,type:"info"});continue e}o["a"].usersToModify.push(Object.assign({},a))}this.selected=[]},toggleShow(e){this.showOnlyUnread=e,this.getData({pagination:this.pagination})},mark(e){return l(this,void 0,void 0,(function*(){try{const a=[];for(const e of this.selected)a.push(e.id);yield this.$axios.post("/admin/markLogs",{data:a,read:e}),this.selected=[]}catch(a){return void this.$q.notify({message:a,type:"negative"})}yield this.getData({pagination:this.pagination})}))}}}),c=d,f=t("2877"),h=t("9989"),m=t("de5e"),u=t("9c40"),g=t("eaac"),p=t("db86"),b=t("0016"),y=t("eebe"),w=t.n(y),v=Object(f["a"])(c,n,i,!1,null,"c862dbfa",null);a["default"]=v.exports;w()(v,"components",{QPage:h["a"],QPageSticky:m["a"],QBtn:u["a"],QTable:g["a"],QTd:p["a"],QIcon:b["a"]})}}]);