(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{5485:function(t,a,e){"use strict";e("b815")},"8b24":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"px-8 py-8"},[e("h4",{staticClass:"m-0 font-light"},[t._v("PEOPLE")]),e("q-tabs",{staticClass:"border-0 border-b border-solid border-gray-300",model:{value:t.activeTab,callback:function(a){t.activeTab=a},expression:"activeTab"}},[e("q-tab",{staticClass:"px-24",attrs:{name:"select",icon:"add",label:"Select"},on:{click:function(a){return t.getData({pagination:t.userPagination,filter:t.searchFilter})}}}),e("q-tab",{staticClass:"px-24",attrs:{name:"edit",icon:"create",label:"Edit"}})],1),e("q-tab-panels",{attrs:{animated:""},model:{value:t.activeTab,callback:function(a){t.activeTab=a},expression:"activeTab"}},[e("q-tab-panel",{attrs:{name:"select"}},[e("h6",{staticClass:"m-0 font-light"},[t._v("SELECT ACCOUNTS TO EDIT")]),e("br"),e("q-table",{staticClass:"sticky",attrs:{loading:t.loading,"virtual-scroll":"","table-style":"max-height: 550px;",flat:"",columns:t.userColumns,filter:t.searchFilter,pagination:t.userPagination,"binary-state-sort":"",selection:"multiple",selected:t.selected,title:"Users",data:t.data},on:{"update:pagination":function(a){t.userPagination=a},"update:selected":function(a){t.selected=a},request:t.getData},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"flex flex-row justify-between w-full"},[e("q-input",{attrs:{outlined:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.searchFilter,callback:function(a){t.searchFilter=a},expression:"searchFilter"}}),e("div",[e("q-btn",{staticClass:"ml-2",attrs:{outline:"",label:t.showPUMs?"Showing Under Monitoring":"Show Under Monitoring",icon:t.showPUMs?"fas fa-eye":"fas fa-eye-slash"},on:{click:function(a){return t.toggleShow("PUMs",!t.showPUMs)}}}),e("br"),e("q-btn",{staticClass:"ml-2 mt-2",attrs:{outline:"",label:t.showPUIs?"Showing Under Investigation":"Show Under Investigation",icon:t.showPUIs?"fas fa-eye":"fas fa-eye-slash"},on:{click:function(a){return t.toggleShow("PUIs",!t.showPUIs)}}})],1)],1)]},proxy:!0}])}),e("q-page-sticky",{attrs:{offset:[20,20],position:"bottom-right"}},[e("q-btn",{staticClass:"p-2 mx-2",attrs:{label:" EXPORT AS EXCEL",color:"secondary",icon:"fas fa-file-export",fab:""},on:{click:t.exportToExcel}}),e("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:1!==t.selected.length,label:" VIEW LOGS",color:"secondary",icon:"remove_red_eye",fab:""},on:{click:t.viewLogs}}),e("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===t.selected.length,label:"ADD TO EDITOR PANEL",color:"primary",icon:"add",fab:""},on:{click:t.addSelectionToEdit}})],1)],1),e("q-tab-panel",{attrs:{name:"edit"}},[e("h6",{staticClass:"m-0 font-light"},[t._v("EDIT VACCINATION STATUSES")]),e("edit-vaccination-status")],1)],1)],1)},s=[],n=e("2047"),o=e("2b0e"),c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"mt-12 overflow-x-visible"},[e("transition-group",{attrs:{name:"transition",mode:"out-in"}},t._l(t.store.usersToModify,(function(a,i){return e("q-card",{key:a.id,staticClass:"mb-8 shadow-none border border-solid border-gray-400"},[e("q-card-section",[e("div",{staticClass:"flex flex-row justify-between"},[e("q-btn",{staticClass:"absolute -mt-8 -ml-8",attrs:{round:"",color:"negative",icon:"close"},on:{click:function(a){return t.store.usersToModify.splice(i,1)}}}),e("div",[e("h6",{staticClass:"m-0 p-0 font-bold"},[t._v(t._s(a.firstName)+" "+t._s(a.lastName))]),e("p",{staticClass:"m-0 p-0"},[t._v(t._s(a.username))])]),e("div",[e("p",{staticClass:"m-0 p-0 text-right font-extrabold",class:1===a.isVaccinated?"text-green-500":"text-red-700"},[t._v(t._s(1===a.isVaccinated?"✅ VACCINATED":"❌ NOT VACCINATED"))]),e("p",{staticClass:"m-0 p-0 text-right font-extrabold",class:t.vaccineStatusStyling(a.isVaccineReady)},[t._v("VACCINE IS "+t._s(a.isVaccineReady.toUpperCase()))]),e("hr"),e("p",{staticClass:"m-0 p-0 text-right"},[t._v("UNDER INVESTIGATION: "),e("b",[t._v(t._s(a.isPUI?"Yes":"No"))])]),e("p",{staticClass:"m-0 p-0 text-right"},[t._v("UNDER MONITORING: "),e("b",[t._v(t._s(a.isPUM?"Yes":"No"))])])])],1),e("br"),e("div",[e("q-btn",{attrs:{outline:"",color:"negative",label:"Vaccine Not Ready"},on:{click:function(e){return t.toggleVaccineStatus(a,"Not Ready")}}}),e("q-btn",{staticClass:"ml-1",attrs:{outline:"",color:"primary",label:"Vaccine Pending"},on:{click:function(e){return t.toggleVaccineStatus(a,"Pending")}}}),e("q-btn",{staticClass:"ml-1",attrs:{outline:"",color:"positive",label:"Vaccine Ready"},on:{click:function(e){return t.toggleVaccineStatus(a,"Ready")}}}),e("q-input",{staticClass:"float-right w-2/5",attrs:{outlined:"",label:"Vaccine Manufacturer"},model:{value:a.vaccineManufacturer,callback:function(e){t.$set(a,"vaccineManufacturer",e)},expression:"user.vaccineManufacturer"}}),e("br"),e("q-btn",{staticClass:"mt-2",attrs:{outline:"",label:"Mark as not vaccinated"},on:{click:function(e){return t.toggleVaccinated(a,!1)}}}),e("q-btn",{staticClass:"mt-2 ml-1",attrs:{outline:"",label:"Mark as vaccinated",color:"secondary"},on:{click:function(e){return t.toggleVaccinated(a,!0)}}}),e("br"),e("q-btn",{staticClass:"mt-2",attrs:{outline:"",label:"Mark as Under Investigation"},on:{click:function(e){return t.togglePUI(a,!a.isPUI)}}}),e("q-btn",{staticClass:"mt-2 ml-1",attrs:{outline:"",label:"Mark as Under Monitoring"},on:{click:function(e){return t.togglePUM(a,!a.isPUM)}}})],1)])],1)})),1)],1),e("q-page-sticky",{attrs:{offset:[20,20],position:"bottom-right"}},[e("q-fab",{staticClass:"p-2",attrs:{disable:0===t.store.usersToModify.length,color:"secondary",direction:"up",icon:"expand_less"}},[e("q-fab-action",{attrs:{color:"primary",icon:"fas fa-pen",label:"Set all vaccine manufacturer"},on:{click:t.setAllVaccineManufacturer}}),e("hr"),e("q-fab-action",{attrs:{color:"negative",icon:"fas fa-times",label:"Mark all Vaccine not ready"},on:{click:function(a){return t.markAllVaccineStatus("Not Ready")}}}),e("q-fab-action",{attrs:{color:"primary",icon:"fas fa-hourglass",label:"Mark all Vaccine pending"},on:{click:function(a){return t.markAllVaccineStatus("Pending")}}}),e("q-fab-action",{attrs:{color:"positive",icon:"fas fa-check",label:"Mark all Vaccine ready"},on:{click:function(a){return t.markAllVaccineStatus("Ready")}}}),e("hr"),e("q-fab-action",{attrs:{color:"negative",icon:"fas fa-times ",label:"Mark all unvaccinated"},on:{click:function(a){return t.markAllVaccinationStatus(0)}}}),e("q-fab-action",{attrs:{color:"primary",icon:"fas fa-check",label:"Mark all vaccinated"},on:{click:function(a){return t.markAllVaccinationStatus(1)}}})],1),e("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===t.store.usersToModify.length,label:"Discard",color:"negative",icon:"close",fab:""},on:{click:t.confirmDiscard}}),e("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===t.store.usersToModify.length,label:"Commit changes",color:"primary",icon:"check",fab:""},on:{click:t.confirmSubmit}})],1)],1)},r=[],l=function(t,a,e,i){function s(t){return t instanceof e?t:new e((function(a){a(t)}))}return new(e||(e=Promise))((function(e,n){function o(t){try{r(i.next(t))}catch(a){n(a)}}function c(t){try{r(i["throw"](t))}catch(a){n(a)}}function r(t){t.done?e(t.value):s(t.value).then(o,c)}r((i=i.apply(t,a||[])).next())}))},d=o["a"].extend({name:"EditVaccinationStatus",data(){return{store:n["a"]}},methods:{vaccineStatusStyling(t){return"Not Ready"===t?"text-red-700":"Pending"===t?"text-blue-500":"Ready"===t?"text-green-500":void 0},toggleVaccinated(t,a){"Ready"!==t.isVaccineReady&&a?this.$q.dialog({title:"Discrepancy",message:`You can't mark ${t.username} vaccinated becauase their vaccination status is ${t.isVaccineReady}.`}):t.isVaccinated=a?1:0},toggleVaccineStatus(t,a){t.isVaccineReady=a,t.isVaccinated&&"Not Ready"===a&&this.toggleVaccinated(t,!1)},markAllVaccineStatus(t){"Not Ready"==t&&this.markAllVaccinationStatus(0);for(const a of n["a"].usersToModify)a.isVaccineReady=t},markAllVaccinationStatus(t){1===t&&this.markAllVaccineStatus("Ready");for(const a of n["a"].usersToModify)a.isVaccinated=t},confirmDiscard(){this.$q.dialog({title:"Discard changes?",cancel:!0,message:`Discard the changes you're making on ${n["a"].usersToModify.length} users?`}).onOk((()=>{n["a"].usersToModify=[]}))},confirmSubmit(){this.$q.dialog({title:"Commit changes?",cancel:!0,message:`Commit the changes you're making on ${n["a"].usersToModify.length} users?`}).onOk((()=>l(this,void 0,void 0,(function*(){try{const t=yield this.$axios.post("/admin/editUser",{data:n["a"].usersToModify.map((t=>({id:t.id,isVaccinated:t.isVaccinated,isVaccineReady:t.isVaccineReady,vaccineManufacturer:t.vaccineManufacturer,isPUI:t.isPUI,isPUM:t.isPUM})))});t.data.result?(this.$q.notify({message:"Saved changes!"}),n["a"].usersToModify=[]):this.$q.notify({message:t.data.message,type:"negative"})}catch(t){this.$q.notify({message:`Commit failed: ${t}`,type:"negative"})}}))))},togglePUI(t,a){t.isPUI=a},togglePUM(t,a){t.isPUM=a},setAllVaccineManufacturer(){this.$q.dialog({title:"Set all vaccine manufacturer",message:"Batch set all of these user's vaccine manufacturer fields.",prompt:{model:""},cancel:!0,persistent:!0}).onOk((t=>{for(const a of n["a"].usersToModify)a.vaccineManufacturer=t}))}}}),u=d,f=e("2877"),g=e("f09f"),m=e("a370"),h=e("9c40"),b=e("27f9"),p=e("de5e"),y=e("c294"),v=e("72db"),P=e("eebe"),k=e.n(P),M=Object(f["a"])(u,c,r,!1,null,null,null),q=M.exports;k()(M,"components",{QCard:g["a"],QCardSection:m["a"],QBtn:h["a"],QInput:b["a"],QPageSticky:p["a"],QFab:y["a"],QFabAction:v["a"]});var x=function(t,a,e,i){function s(t){return t instanceof e?t:new e((function(a){a(t)}))}return new(e||(e=Promise))((function(e,n){function o(t){try{r(i.next(t))}catch(a){n(a)}}function c(t){try{r(i["throw"](t))}catch(a){n(a)}}function r(t){t.done?e(t.value):s(t.value).then(o,c)}r((i=i.apply(t,a||[])).next())}))},U=o["a"].extend({name:"Index",components:{EditVaccinationStatus:q},activated(){return x(this,void 0,void 0,(function*(){this.loading=!0,yield this.getData({pagination:this.userPagination,filter:void 0}),this.loading=!1}))},methods:{getData(t){return x(this,void 0,void 0,(function*(){this.userPagination=Object.assign({},t.pagination),this.loading=!0;const a=yield n["a"].axios.post("/admin/getUsers",{page:this.userPagination.page-1,pageSize:this.userPagination.rowsPerPage,filter:this.searchFilter,showPUIs:this.showPUIs,showPUMs:this.showPUMs});this.data=a.data.results,this.userPagination.rowsNumber=a.data.total,this.loading=!1}))},toggleShow(t,a){"PUMs"===t?this.showPUMs=a:"PUIs"===t&&(this.showPUIs=a),this.getData({pagination:this.userPagination,filter:this.searchFilter,showPUIs:this.showPUIs,showPUMs:this.showPUMs})},addSelectionToEdit(){t:for(const t of this.selected){for(const a of n["a"].usersToModify)if(t.id===a.id){this.$q.notify({message:`${t.username} is already in the edit panel.`,type:"info"});continue t}n["a"].usersToModify.push(Object.assign({},t))}this.selected=[]},viewLogs(){return x(this,void 0,void 0,(function*(){n["a"].userShownInLogs=Object.assign({},this.selected[0]),yield this.$router.push("/view-logs")}))},exportToExcel(){this.$q.dialog({title:"Export user data to an excel file?",message:`You will be exporting a total of ${this.userPagination.rowsNumber} user's data.`,cancel:!0}).onOk((()=>x(this,void 0,void 0,(function*(){try{const t=yield this.$axios.get("/admin/export");t.data.result?this.$q.notify({message:"Export successful! Export file located on the Desktop.",type:"positive"}):this.$q.notify({message:"Export failed! Check server console for details.",type:"negative"})}catch(t){this.$q.notify({message:`Export failed! ${t}`,type:"negative"})}}))))}},data(){return{selected:[],store:n["a"],searchFilter:"",data:[],showPUIs:!1,showPUMs:!1,totalRows:0,activeTab:"select",loading:!1,userPagination:{page:0,rowsPerPage:10,rowsNumber:0},userColumns:[{name:"username",required:!0,label:"Username",field:"username",align:"left"},{name:"firstName",required:!0,label:"First Name",field:"firstName"},{name:"middleName",required:!0,label:"Middle Name",field:"middleName"},{name:"lastName",required:!0,label:"Last Name",field:"lastName"},{name:"isPUM",required:!0,label:"Is Under Monitoring",format:t=>""+(t?"✔ Yes":"❌ No"),field:"isPUM"},{name:"isPUI",required:!0,label:"Is Under Investigation",format:t=>""+(t?"✔ Yes":"❌ No"),field:"isPUI"},{name:"isVaccinated",required:!0,label:"Is Vaccinated",format:t=>""+(t?"✔ Yes":"❌ No"),field:"isVaccinated"},{name:"isVaccineReady",required:!0,label:"Vaccine Readiness",field:"isVaccineReady"},{name:"vaccineManufacturer",required:!0,label:"Vaccine Manufacturer",field:"vaccineManufacturer"}]}}}),w=U,C=(e("5485"),e("9989")),V=e("429b"),S=e("7460"),T=e("adad"),I=e("823b"),N=e("eaac"),E=e("0016"),R=Object(f["a"])(w,i,s,!1,null,null,null);a["default"]=R.exports;k()(R,"components",{QPage:C["a"],QTabs:V["a"],QTab:S["a"],QTabPanels:T["a"],QTabPanel:I["a"],QTable:N["a"],QInput:b["a"],QIcon:E["a"],QBtn:h["a"],QPageSticky:p["a"]})},b815:function(t,a,e){}}]);