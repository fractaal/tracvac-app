(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"8b24":function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",{staticClass:"px-8 py-8"},[e("h4",{staticClass:"m-0 font-light"},[a._v("PEOPLE")]),e("q-tabs",{staticClass:"border-0 border-b border-solid border-gray-300",model:{value:a.activeTab,callback:function(t){a.activeTab=t},expression:"activeTab"}},[e("q-tab",{staticClass:"px-24",attrs:{name:"select",icon:"add",label:"Select"}}),e("q-tab",{staticClass:"px-24",attrs:{name:"edit",icon:"create",label:"Edit"}})],1),e("q-tab-panels",{attrs:{animated:""},model:{value:a.activeTab,callback:function(t){a.activeTab=t},expression:"activeTab"}},[e("q-tab-panel",{attrs:{name:"select"}},[e("h6",{staticClass:"m-0 font-light"},[a._v("SELECT ACCOUNTS TO EDIT")]),e("br"),e("q-table",{attrs:{loading:a.loading,"virtual-scroll":"","table-style":"max-height: 550px;",flat:"",columns:a.userColumns,filter:a.searchFilter,pagination:a.userPagination,"binary-state-sort":"",selection:"multiple",selected:a.selected,title:"Users",data:a.data},on:{"update:pagination":function(t){a.userPagination=t},"update:selected":function(t){a.selected=t},request:a.getData},scopedSlots:a._u([{key:"top",fn:function(){return[e("q-input",{attrs:{outlined:"",debounce:"300",placeholder:"Search"},scopedSlots:a._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:a.searchFilter,callback:function(t){a.searchFilter=t},expression:"searchFilter"}})]},proxy:!0}])}),e("q-page-sticky",{attrs:{offset:[20,20],position:"bottom-right"}},[e("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===a.selected.length,label:"ADD TO EDITOR PANEL",color:"primary",icon:"add",fab:""},on:{click:a.addSelectionToEdit}})],1)],1),e("q-tab-panel",{attrs:{name:"edit"}},[e("h6",{staticClass:"m-0 font-light"},[a._v("EDIT VACCINATION STATUSES")]),e("edit-vaccination-status")],1)],1)],1)},n=[],s=e("2047"),c=e("2b0e"),o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"mt-12 overflow-x-visible"},[e("transition-group",{attrs:{name:"transition",mode:"out-in"}},a._l(a.store.usersToModify,(function(t,i){return e("q-card",{key:t.id,staticClass:"mb-8 shadow-none border border-solid border-gray-400"},[e("q-card-section",[e("div",{staticClass:"flex flex-row justify-between"},[e("q-btn",{staticClass:"absolute -mt-8 -ml-8",attrs:{round:"",color:"negative",icon:"close"},on:{click:function(t){return a.store.usersToModify.splice(i,1)}}}),e("div",[e("h6",{staticClass:"m-0 p-0 font-bold"},[a._v(a._s(t.firstName)+" "+a._s(t.lastName))]),e("p",{staticClass:"m-0 p-0"},[a._v(a._s(t.username))])]),e("div",[e("p",{staticClass:"m-0 p-0 text-right font-extrabold",class:1===t.isVaccinated?"text-green-500":"text-red-700"},[a._v(a._s(1===t.isVaccinated?"✅ VACCINATED":"❌ NOT VACCINATED"))]),e("p",{staticClass:"m-0 p-0 text-right font-extrabold",class:a.vaccineStatusStyling(t.isVaccineReady)},[a._v("VACCINE IS "+a._s(t.isVaccineReady.toUpperCase()))])])],1),e("br"),e("div",[e("q-btn",{attrs:{outline:"",color:"negative",label:"Vaccine Not Ready"},on:{click:function(e){return a.toggleVaccineStatus(t,"Not Ready")}}}),e("q-btn",{staticClass:"ml-1",attrs:{outline:"",color:"primary",label:"Vaccine Pending"},on:{click:function(e){return a.toggleVaccineStatus(t,"Pending")}}}),e("q-btn",{staticClass:"ml-1",attrs:{outline:"",color:"positive",label:"Vaccine Ready"},on:{click:function(e){return a.toggleVaccineStatus(t,"Ready")}}}),e("q-input",{staticClass:"float-right w-2/5",attrs:{rules:[function(a){return!!a||"Must not be empty."}],outlined:"",label:"Vaccine Manufacturer"},model:{value:t.vaccineManufacturer,callback:function(e){a.$set(t,"vaccineManufacturer",e)},expression:"user.vaccineManufacturer"}}),e("br"),e("q-btn",{staticClass:"mt-2",attrs:{outline:"",label:"Mark not vaccinated"},on:{click:function(e){return a.toggleVaccinated(t,!1)}}}),e("q-btn",{staticClass:"mt-2 ml-1",attrs:{outline:"",label:"Mark vaccinated",color:"secondary"},on:{click:function(e){return a.toggleVaccinated(t,!0)}}})],1)])],1)})),1)],1),e("q-page-sticky",{attrs:{offset:[20,20],position:"bottom-right"}},[e("q-fab",{staticClass:"p-2",attrs:{disable:0===a.store.usersToModify.length,color:"secondary",direction:"up",icon:"expand_less"}},[e("q-fab-action",{attrs:{color:"primary",icon:"fas fa-pen",label:"Set all vaccine manufacturer"},on:{click:a.setAllVaccineManufacturer}}),e("hr"),e("q-fab-action",{attrs:{color:"negative",icon:"fas fa-times",label:"Mark all Vaccine not ready"},on:{click:function(t){return a.markAllVaccineStatus("Not Ready")}}}),e("q-fab-action",{attrs:{color:"primary",icon:"fas fa-hourglass",label:"Mark all Vaccine pending"},on:{click:function(t){return a.markAllVaccineStatus("Pending")}}}),e("q-fab-action",{attrs:{color:"positive",icon:"fas fa-check",label:"Mark all Vaccine ready"},on:{click:function(t){return a.markAllVaccineStatus("Ready")}}}),e("hr"),e("q-fab-action",{attrs:{color:"negative",icon:"fas fa-times ",label:"Mark all unvaccinated"},on:{click:function(t){return a.markAllVaccinationStatus(0)}}}),e("q-fab-action",{attrs:{color:"primary",icon:"fas fa-check",label:"Mark all vaccinated"},on:{click:function(t){return a.markAllVaccinationStatus(1)}}})],1),e("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===a.store.usersToModify.length,label:"Discard",color:"negative",icon:"close",fab:""},on:{click:a.confirmDiscard}}),e("q-btn",{staticClass:"p-2 mx-2",attrs:{disable:0===a.store.usersToModify.length,label:"Commit changes",color:"primary",icon:"check",fab:""},on:{click:a.confirmSubmit}})],1)],1)},r=[],l=function(a,t,e,i){function n(a){return a instanceof e?a:new e((function(t){t(a)}))}return new(e||(e=Promise))((function(e,s){function c(a){try{r(i.next(a))}catch(t){s(t)}}function o(a){try{r(i["throw"](a))}catch(t){s(t)}}function r(a){a.done?e(a.value):n(a.value).then(c,o)}r((i=i.apply(a,t||[])).next())}))},d=c["a"].extend({name:"EditVaccinationStatus",data(){return{store:s["a"]}},methods:{vaccineStatusStyling(a){return"Not Ready"===a?"text-red-700":"Pending"===a?"text-blue-500":"Ready"===a?"text-green-500":void 0},toggleVaccinated(a,t){"Ready"!==a.isVaccineReady&&t?this.$q.dialog({title:"Discrepancy",message:`You can't mark ${a.username} vaccinated becauase their vaccination status is ${a.isVaccineReady}.`}):a.isVaccinated=t?1:0},toggleVaccineStatus(a,t){a.isVaccineReady=t,a.isVaccinated&&"Not Ready"===t&&this.toggleVaccinated(a,!1)},markAllVaccineStatus(a){"Not Ready"==a&&this.markAllVaccinationStatus(0);for(const t of s["a"].usersToModify)t.isVaccineReady=a},markAllVaccinationStatus(a){1===a&&this.markAllVaccineStatus("Ready");for(const t of s["a"].usersToModify)t.isVaccinated=a},confirmDiscard(){this.$q.dialog({title:"Discard changes?",cancel:!0,message:`Discard the changes you're making on ${s["a"].usersToModify.length} users?`}).onOk((()=>{s["a"].usersToModify=[]}))},confirmSubmit(){this.$q.dialog({title:"Commit changes?",cancel:!0,message:`Commit the changes you're making on ${s["a"].usersToModify.length} users?`}).onOk((()=>l(this,void 0,void 0,(function*(){try{yield Promise.all(s["a"].usersToModify.map((a=>l(this,void 0,void 0,(function*(){yield this.$axios.post("/admin/editUser",{userId:a.id,isVaccinated:a.isVaccinated,isVaccineReady:a.isVaccineReady,vaccineManufacturer:a.vaccineManufacturer})}))))),s["a"].usersToModify=[]}catch(a){this.$q.notify({message:`Commit failed - ${a}`})}}))))}}}),u=d,f=e("2877"),m=e("f09f"),b=e("a370"),g=e("9c40"),p=e("27f9"),h=e("de5e"),y=e("c294"),v=e("72db"),V=e("eebe"),k=e.n(V),q=Object(f["a"])(u,o,r,!1,null,null,null),C=q.exports;k()(q,"components",{QCard:m["a"],QCardSection:b["a"],QBtn:g["a"],QInput:p["a"],QPageSticky:h["a"],QFab:y["a"],QFabAction:v["a"]});var T=function(a,t,e,i){function n(a){return a instanceof e?a:new e((function(t){t(a)}))}return new(e||(e=Promise))((function(e,s){function c(a){try{r(i.next(a))}catch(t){s(t)}}function o(a){try{r(i["throw"](a))}catch(t){s(t)}}function r(a){a.done?e(a.value):n(a.value).then(c,o)}r((i=i.apply(a,t||[])).next())}))},x=c["a"].extend({name:"Index",components:{EditVaccinationStatus:C},activated(){return T(this,void 0,void 0,(function*(){this.loading=!0,yield this.getData({pagination:this.userPagination,filter:void 0}),this.loading=!1}))},methods:{getData(a){return T(this,void 0,void 0,(function*(){this.userPagination=Object.assign({},a.pagination),this.loading=!0;const t=yield s["a"].axios.post("/admin/getUsers",{page:this.userPagination.page-1,pageSize:this.userPagination.rowsPerPage,filter:this.searchFilter});this.data=t.data.results,this.userPagination.rowsNumber=t.data.total,this.loading=!1}))},addSelectionToEdit(){a:for(const a of this.selected){for(const t of s["a"].usersToModify)if(a.id===t.id){this.$q.notify({message:`${a.username} is already in the edit panel.`,type:"info"});continue a}s["a"].usersToModify.push(Object.assign({},a))}this.selected=[]}},data(){return{selected:[],store:s["a"],searchFilter:"",data:[],totalRows:0,activeTab:"select",loading:!1,userPagination:{page:0,rowsPerPage:10,rowsNumber:0},userColumns:[{name:"username",required:!0,label:"Username",field:"username",align:"left"},{name:"firstName",required:!0,label:"First Name",field:"firstName"},{name:"middleName",required:!0,label:"Middle Name",field:"middleName"},{name:"lastName",required:!0,label:"Last Name",field:"lastName"},{name:"isVaccinated",required:!0,label:"Is Vaccinated",format:a=>""+(1===a?"✔ Yes":"❌ No"),field:"isVaccinated"},{name:"isVaccineReady",required:!0,label:"Vaccine Readiness",field:"isVaccineReady"},{name:"vaccineManufacturer",required:!0,label:"Vaccine Manufacturer",field:"vaccineManufacturer"}]}}}),S=x,M=e("9989"),N=e("429b"),P=e("7460"),R=e("adad"),w=e("823b"),A=e("eaac"),_=e("0016"),E=Object(f["a"])(S,i,n,!1,null,null,null);t["default"]=E.exports;k()(E,"components",{QPage:M["a"],QTabs:N["a"],QTab:P["a"],QTabPanels:R["a"],QTabPanel:w["a"],QTable:A["a"],QInput:p["a"],QIcon:_["a"],QPageSticky:h["a"],QBtn:g["a"]})}}]);