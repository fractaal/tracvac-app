(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"1c96":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"border border-solid border-gray-200 mb-5 flex items-center content-center justify-between relative p-4 rounded-lg",on:{click:e.emitClick}},[e.showBadge?n("q-badge",{attrs:{label:"NEW",floating:"",color:"red"}}):e._e(),n("div",{staticClass:" flex items-center"},[n("q-icon",{staticClass:"mr-2 text-blue-500",attrs:{name:e.icon,size:"md"}}),n("p",{staticClass:"font-bold m-0"},[e._v(e._s(e.title))])],1),n("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1)},o=[],a=n("2b0e"),r=a["a"].extend({name:"ButtonCard",props:{title:{type:String,required:!0},icon:{type:String,required:!0},showBadge:{type:Boolean,required:!1}},methods:{emitClick(){setTimeout((()=>{this.$emit("click")}),150)}}}),c=r,s=n("2877"),l=n("58a81"),u=n("0016"),d=n("714f"),f=n("eebe"),p=n.n(f),h=Object(s["a"])(c,i,o,!1,null,null,null);t["a"]=h.exports;p()(h,"components",{QBadge:l["a"],QIcon:u["a"]}),p()(h,"directives",{Ripple:d["a"]})},"24c1":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-img",{staticClass:"rounded-full shadow-xl ring-4 ring-white",attrs:{src:e.fullPath,ratio:"1"}},[n("q-menu",[n("q-list",[n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[n("q-item-section",{on:{click:function(t){return e.$router.push("/change-profile-picture")}}},[e._v("\n            Change Profile Picture\n          ")])],1)],1)],1)],1)],1)},o=[],a=n("2b0e"),r=n("2047"),c=n("18d6"),s=a["a"].extend({name:"ProfilePicture",created(){this.getProfilePicturePath()},methods:{getProfilePicturePath(){var e;this.fullPath=new URL(null===(e=r["a"].userInfo)||void 0===e?void 0:e.profilePicturePath,c["a"].getItem("server")).toString()}},data(){return{errored:!1,store:r["a"],fullPath:""}},watch:{"store.userInfo.profilePicturePath":function(){this.getProfilePicturePath()}}}),l=s,u=n("2877"),d=n("068f"),f=n("4e73"),p=n("1c1c"),h=n("66e5"),v=n("4074"),m=n("714f"),g=n("7f67"),b=n("eebe"),y=n.n(b),w=Object(u["a"])(l,i,o,!1,null,"7a5ff2f3",null);t["a"]=w.exports;y()(w,"components",{QImg:d["a"],QMenu:f["a"],QList:p["a"],QItem:h["a"],QItemSection:v["a"]}),y()(w,"directives",{Ripple:m["a"],ClosePopup:g["a"]})},"802f":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("18d6"),o=n("2047"),a=n("d7ca"),r=function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{s(i.next(e))}catch(t){a(t)}}function c(e){try{s(i["throw"](e))}catch(t){a(t)}}function s(e){e.done?n(e.value):o(e.value).then(r,c)}s((i=i.apply(e,t||[])).next())}))};function c(){return r(this,void 0,void 0,(function*(){let e=i["a"].getItem("alreadyRead");null===e&&i["a"].set("alreadyRead",[]),e=i["a"].getItem("alreadyRead");const[t]=yield Object(a["a"])(0);for(const i of t)if(-1===(null===e||void 0===e?void 0:e.indexOf(i.id))){for(const e of o["a"].menu)"Notifications from your LGU"===e.name&&(e.showBadge=!0);e.push(i.id)}i["a"].set("alreadyRead",e);const n=i["a"].getItem("lastIsVaccinated"),r=i["a"].getItem("lastIsVaccineReady");if(null!==n||null!==r){const e=!!o["a"].userInfo.isVaccinated,t=o["a"].userInfo.isVaccineReady;e!==n&&(o["a"].changeInVaccinationStatus=!0),t!==r&&(o["a"].changeInVaccineStatus=!0),i["a"].set("lastIsVaccinated",e),i["a"].set("lastIsVaccineReady",t)}else i["a"].set("lastIsVaccinated",!!o["a"].userInfo.isVaccinated),i["a"].set("lastIsVaccineReady",o["a"].userInfo.isVaccineReady)}))}},"858e":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var i=n("2047"),o=n("44eb"),a=n("18d6"),r=n("436b"),c=function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{s(i.next(e))}catch(t){a(t)}}function c(e){try{s(i["throw"](e))}catch(t){a(t)}}function s(e){e.done?n(e.value):o(e.value).then(r,c)}s((i=i.apply(e,t||[])).next())}))};function s(){return c(this,void 0,void 0,(function*(){if("serviceWorker"in navigator){const e=yield navigator.serviceWorker.ready,t=yield e.pushManager.getSubscription();null!==t||a["a"].getItem("initialNotificationPromptShown")?null!==t?(i["a"].showNotifications=!0,d(t)):i["a"].showNotifications=!1:(a["a"].set("initialNotificationPromptShown",!0),r["a"].create({title:"Enable notifications?",message:"By enabling notifications, we'll be able to inform you of important updates without having Tracvac open."}).onOk((()=>{i["a"].showNotifications=!0,l()})))}}))}function l(){return c(this,void 0,void 0,(function*(){if("serviceWorker"in navigator){const t=yield navigator.serviceWorker.ready;try{const e=(yield(yield o["b"].get("/getVAPIDPublicKey")).data).publicKey;console.log(e);const n=yield t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e});console.log("Endpoint URL: ",n.endpoint),d(n)}catch(e){"denied"===Notification.permission?console.warn("Permission for notifications was denied"):console.error("Unable to subscribe to push",e),i["a"].showNotifications=!1}}}))}function u(){var e;return c(this,void 0,void 0,(function*(){if("serviceWorker"in navigator){console.log("Unsubscribing from push...");const n=yield navigator.serviceWorker.ready;try{yield null===(e=yield n.pushManager.getSubscription())||void 0===e?void 0:e.unsubscribe()}catch(t){console.warn(`Unsubscribing from push notifs failed: ${t}`)}console.log("Set showNotifications to false"),i["a"].showNotifications=!1}}))}function d(e){return c(this,void 0,void 0,(function*(){console.log("Saving subscription to server!"),yield o["b"].post("/saveSubscription",e)}))}},bc13:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"px-8"},[n("q-pull-to-refresh",{on:{refresh:e.reload}},[n("div",{staticClass:"flex flex-row justify-between pt-8 items-center"},[n("h5",{staticClass:"font-bold m-0 p-0"},[e._v("Hello, "+e._s(e.store.userInfo.firstName)+"!")]),n("profile-picture",{staticClass:"w-10 h-10"})],1),"{}"!==JSON.stringify(e.store.recentlyViewed)?n("div",[n("p",{staticClass:"font-bold mt-8 mb-2 p-0 text-gray-500"},[e._v("RECENTLY VIEWED")]),n("large-button-card",{staticClass:"bg-blue-500 text-white",attrs:{title:e.store.recentlyViewed.name,description:e.store.recentlyViewed.description,icon:e.store.recentlyViewed.icon},on:{click:e.store.recentlyViewed.action}})],1):e._e(),e._l(e.store.menu,(function(t){return n("div",{key:t.name},[t.isSeparator?n("p",{staticClass:"font-bold mt-8 mb-2 p-0 text-gray-500"},[e._v(e._s(t.name))]):t.hidden?e._e():n("button-card",{attrs:{title:t.name,icon:t.icon,"show-badge":t.showBadge},on:{click:t.action}})],1)}))],2)],1)},o=[],a=n("2b0e"),r=n("ea9b"),c=n("2047"),s=n("858e"),l=n("1c96"),u=n("24c1"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"relative border border-solid border-gray-200 p-4 rounded-lg",on:{click:e.emitClick}},[n("p",{staticClass:"m-0 font-bold text-h6"},[e._v(e._s(e.title))]),n("p",{staticClass:"m-0"},[e._v(e._s(e.description))])])},f=[],p=a["a"].extend({name:"LargeButtonCard",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,required:!0}},methods:{emitClick(){setTimeout((()=>{this.$emit("click")}),150)}}}),h=p,v=n("2877"),m=n("714f"),g=n("eebe"),b=n.n(g),y=Object(v["a"])(h,d,f,!1,null,null,null),w=y.exports;b()(y,"directives",{Ripple:m["a"]});var P=n("802f"),x=function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{s(i.next(e))}catch(t){a(t)}}function c(e){try{s(i["throw"](e))}catch(t){a(t)}}function s(e){e.done?n(e.value):o(e.value).then(r,c)}s((i=i.apply(e,t||[])).next())}))};n.e(18).then(n.bind(null,"622a"));var I=a["a"].extend({name:"Home",components:{LargeButtonCard:w,ButtonCard:l["a"],ProfilePicture:u["a"]},activated(){Object(P["a"])(),s["a"]()},beforeRouteLeave(e,t,n){"/register"===e.path?n(!1):n()},data(){return{store:c["a"]}},methods:{uploadProfilePicture:r["d"],reload(e){return x(this,void 0,void 0,(function*(){yield Object(P["a"])(),e()}))}}}),C=I,_=n("9989"),k=n("59d7"),V=n("7d53"),R=Object(v["a"])(C,i,o,!1,null,null,null);t["default"]=R.exports;b()(R,"components",{QPage:_["a"],QPullToRefresh:k["a"],QFile:V["a"]})},d7ca:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("2047");var i=n("44eb"),o=n("1d60"),a=n("18d6"),r=function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function r(e){try{s(i.next(e))}catch(t){a(t)}}function c(e){try{s(i["throw"](e))}catch(t){a(t)}}function s(e){e.done?n(e.value):o(e.value).then(r,c)}s((i=i.apply(e,t||[])).next())}))};function c(e){return r(this,void 0,void 0,(function*(){try{const t=yield i["b"].get(`/notification/${e}`),n=a["a"].getItem("alreadyRead");for(const e of t.data.notifications.results)-1===n.indexOf(e.id)&&n.push(e.id);return a["a"].set("alreadyRead",n),[t.data.notifications.results,0===t.data.notifications.results.length]}catch(t){return o["a"].negative(`An error occurred while trying to get notifications! ${t}`),[null,!1]}}))}}}]);