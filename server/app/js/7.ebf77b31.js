(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"339c":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-0 py-4 px-4"},[i("q-btn",{staticClass:"inline mr-4 p-0",attrs:{flat:"",round:"",icon:"keyboard_arrow_left"},on:{click:t.goBack}}),i("h5",{staticClass:"align-middle inline font-bold"},[t._v(t._s(t.title))])],1)},s=[],o=i("2b0e"),a=function(t,e,i,n){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function r(t){try{c(n["throw"](t))}catch(e){o(e)}}function c(t){t.done?i(t.value):s(t.value).then(a,r)}c((n=n.apply(t,e||[])).next())}))},r=o["a"].extend({name:"BlueHeader",props:{title:{type:String}},methods:{goBack(){return a(this,void 0,void 0,(function*(){yield new Promise((t=>setTimeout(t,150))),this.$router.back()}))}}}),c=r,l=i("2877"),u=i("9c40"),p=i("eebe"),d=i.n(p),v=Object(l["a"])(c,n,s,!1,null,"5b0f3949",null);e["a"]=v.exports;d()(v,"components",{QBtn:u["a"]})},"858e":function(t,e,i){"use strict";i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return l})),i.d(e,"c",(function(){return u}));var n=i("2047"),s=i("44eb"),o=i("18d6"),a=i("436b"),r=function(t,e,i,n){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function r(t){try{c(n["throw"](t))}catch(e){o(e)}}function c(t){t.done?i(t.value):s(t.value).then(a,r)}c((n=n.apply(t,e||[])).next())}))};function c(){return r(this,void 0,void 0,(function*(){if("serviceWorker"in navigator){const t=yield navigator.serviceWorker.ready,e=yield t.pushManager.getSubscription();null!==e||o["a"].getItem("initialNotificationPromptShown")?null!==e?(n["a"].showNotifications=!0,p(e)):n["a"].showNotifications=!1:(o["a"].set("initialNotificationPromptShown",!0),a["a"].create({title:"Enable notifications?",message:"By enabling notifications, we'll be able to inform you of important updates without having Tracvac open."}).onOk((()=>{n["a"].showNotifications=!0,l()})))}}))}function l(){return r(this,void 0,void 0,(function*(){if("serviceWorker"in navigator){const e=yield navigator.serviceWorker.ready;try{const t=(yield(yield s["b"].get("/getVAPIDPublicKey")).data).publicKey;console.log(t);const i=yield e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t});console.log("Endpoint URL: ",i.endpoint),p(i)}catch(t){"denied"===Notification.permission?console.warn("Permission for notifications was denied"):console.error("Unable to subscribe to push",t),n["a"].showNotifications=!1}}}))}function u(){var t;return r(this,void 0,void 0,(function*(){if("serviceWorker"in navigator){console.log("Unsubscribing from push...");const i=yield navigator.serviceWorker.ready;try{yield null===(t=yield i.pushManager.getSubscription())||void 0===t?void 0:t.unsubscribe()}catch(e){console.warn(`Unsubscribing from push notifs failed: ${e}`)}console.log("Set showNotifications to false"),n["a"].showNotifications=!1}}))}function p(t){return r(this,void 0,void 0,(function*(){console.log("Saving subscription to server!"),yield s["b"].post("/saveSubscription",t)}))}},9224:function(t){t.exports=JSON.parse('{"name":"tracvac","version":"1.4.0","description":"Vaccine passport application.","productName":"Tracvac","author":"visualsbykleio@gmail.com","private":true,"scripts":{"lint":"eslint --ext .js,.ts,.vue ./","build-pwa":"quasar build -m pwa","test":"echo \\"No test specified\\" && exit 0"},"dependencies":{"@quasar/extras":"^1.0.0","axios":"^0.18.1","convert-vapid-public-key":"^1.0.2","core-js":"^3.6.5","date-fns":"^2.19.0","fastclick":"^1.0.6","http-proxy-middleware":"0.19.x","quasar":"^1.0.0","typescript":"3.8.3","vue-page-transition":"^0.2.2"},"devDependencies":{"@quasar/app":"^2.0.0","@types/fastclick":"^1.0.29","@types/node":"^10.17.15","@typescript-eslint/eslint-plugin":"^3.3.0","@typescript-eslint/parser":"^3.3.0","babel-eslint":"^10.0.1","eslint":"^6.8.0","eslint-config-standard":"^14.1.0","eslint-loader":"^3.0.3","eslint-plugin-import":"^2.14.0","eslint-plugin-node":"^11.0.0","eslint-plugin-promise":"^4.0.1","eslint-plugin-standard":"^4.0.0","eslint-plugin-vue":"^6.1.2","quasar-app-extension-tailwindcss":"^2.0.4","workbox-webpack-plugin":"^5.0.0"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 10.18.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}')},"982f":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("custom-header",{attrs:{title:"Preferences"}}),n("div",{staticClass:"px-8"},[n("p",{staticClass:"font-bold m-0 p-0 text-gray-500"},[t._v("YOU'RE CONNECTED TO")]),n("p",{staticClass:"text-h5 m-0"},[t._v(t._s(t.store.serverInfo.location))]),n("p",{staticClass:"m-0"},[t._v("at "),n("b",[t._v(t._s(t.store.serverInfo.address))])]),n("br"),n("q-list",{staticClass:"space-y-4"},[t.showDisconnectButton?n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"ring ring-gray-200 rounded-xl",attrs:{tag:"label"},on:{click:t.disconnect}},[n("q-item-section",[n("q-item-label",{staticClass:"mt-2"},[n("b",[t._v(" Disconnect ")]),n("p",[t._v(" Disconnect from the current Tracvac server you're connected to. ")])])],1)],1):t._e(),n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"ring ring-gray-200 rounded-xl",attrs:{tag:"label"},on:{click:t.changePassword}},[n("q-item-section",[n("q-item-label",{staticClass:"mt-2"},[n("b",[t._v(" Change Password ")]),n("p",[t._v(" Old password compromised, or you has it just outgrown you? ")])])],1)],1),n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"ring ring-gray-200 rounded-xl",attrs:{tag:"label"}},[n("q-item-section",[n("q-item-label",{staticClass:"mt-2"},[n("b",[t._v(" Notifications ")]),n("p",[t._v(" Notifications allow us to tell you about vaccine updates or LGU updates without you needing to have Tracvac open. ")])])],1),n("q-item-section",{attrs:{avatar:""}},[n("q-toggle",{attrs:{color:"blue"},model:{value:t.store.showNotifications,callback:function(e){t.$set(t.store,"showNotifications",e)},expression:"store.showNotifications"}})],1)],1),n("div",{staticClass:"text-subtitle2 mt-4 font-bold m-0 p-0 text-gray-500"},[t._v("\n        APP VERSION "+t._s(i("9224").version)+"\n      ")])],1)],1)],1)},s=[],o=i("2b0e"),a=i("2047"),r=i("44eb"),c=i("ea9b"),l=i("858e"),u=i("339c"),p=o["a"].extend({name:"Preferences",components:{CustomHeader:u["a"]},created(){this.showDisconnectButton=!1},data(){return{showDisconnectButton:!0,store:a["a"]}},watch:{"store.showNotifications":function(t){t?Object(l["b"])():Object(l["c"])()}},methods:{disconnect:r["c"],changePassword:c["a"]}}),d=p,v=i("2877"),f=i("9989"),b=i("1c1c"),m=i("66e5"),g=i("4074"),h=i("0170"),w=i("9564"),y=i("714f"),x=i("eebe"),N=i.n(x),k=Object(v["a"])(d,n,s,!1,null,"c7005038",null);e["default"]=k.exports;N()(k,"components",{QPage:f["a"],QList:b["a"],QItem:m["a"],QItemSection:g["a"],QItemLabel:h["a"],QToggle:w["a"]}),N()(k,"directives",{Ripple:y["a"]})}}]);